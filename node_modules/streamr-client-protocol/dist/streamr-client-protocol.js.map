{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6a6421bca16b044733aa","webpack:///./src/protocol/WebsocketResponse.js","webpack:///./src/errors/ValidationError.js","webpack:///./src/protocol/WebsocketRequest.js","webpack:///./src/utils/ParseUtil.js","webpack:///./src/errors/UnsupportedVersionError.js","webpack:///./src/protocol/StreamAndPartition.js","webpack:///./src/protocol/StreamMessage.js","webpack:///./src/protocol/ResendResponse.js","webpack:///./src/errors/InvalidJsonError.js","webpack:///./src/utils/TimestampUtil.js","webpack:///./src/protocol/ErrorPayload.js","webpack:///./src/protocol/ResendResponsePayload.js","webpack:///./src/index.js","webpack:///./src/protocol/BroadcastMessage.js","webpack:///./src/protocol/UnicastMessage.js","webpack:///./src/protocol/PublishRequest.js","webpack:///./src/protocol/ErrorResponse.js","webpack:///./src/protocol/ResendRequest.js","webpack:///./src/protocol/ResendResponseNoResend.js","webpack:///./src/protocol/ResendResponseResending.js","webpack:///./src/protocol/ResendResponseResent.js","webpack:///./src/protocol/SubscribeRequest.js","webpack:///./src/protocol/SubscribeResponse.js","webpack:///./src/protocol/UnsubscribeRequest.js","webpack:///./src/protocol/UnsubscribeResponse.js"],"names":["messageClassByMessageType","module","exports","messageType","payload","subId","messageClass","getPayloadClass","getMessageName","name","constructor","version","payloadVersion","toObject","JSON","stringify","Error","message","stringOrArray","ensureParsed","checkVersion","deserializedPayload","deserialize","constructorArgs","getConstructorArguments","clazz","WebsocketRequest","type","streamId","apiKey","sessionToken","stream","authKey","stringOrObject","parse","StreamAndPartition","streamPartition","partition","msg","prototype","objectToConstructorArgs","BYE_KEY","StreamMessage","timestamp","ttl","offset","previousOffset","contentType","content","signatureType","publisherAddress","signature","parsedContent","undefined","CONTENT_TYPES","err","compact","arr","getParsedContent","getSerializedContent","push","obj","parseContent","result","slice","ResendResponse","TYPE","serializedMessage","jsonString","parseError","streamMessage","millisOrString","Number","Date","isNaN","errorString","error","ErrorPayload","sub","WebsocketResponse","BroadcastMessage","UnicastMessage","PublishRequest","ErrorResponse","ResendRequest","ResendResponseNoResend","ResendResponseResending","ResendResponseResent","ResendResponsePayload","SubscribeRequest","SubscribeResponse","UnsubscribeRequest","UnsubscribeResponse","Errors","InvalidJsonError","UnsupportedVersionError","Utils","TimestampUtil","registerMessageClass","partitionKey","ts","getTimestampAsNumber","pkey","addr","sigtype","sig","errorMessage","resendOptions","resend_all","resend_last","resend_from","resend_from_time","Object","keys","forEach","key","startsWith"],"mappings":"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","file":"streamr-client-protocol.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"streamr-client-protocol\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Protocol\"] = factory();\n\telse\n\t\troot[\"Protocol\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6a6421bca16b044733aa","import UnsupportedVersionError from '../errors/UnsupportedVersionError'\nimport ValidationError from '../errors/ValidationError'\nimport ParseUtil from '../utils/ParseUtil'\n\nconst messageClassByMessageType = {}\n\nmodule.exports = class WebsocketResponse {\n    constructor(messageType, payload, subId) {\n        this.messageType = messageType\n        this.payload = payload\n        this.subId = subId\n\n        const messageClass = messageClassByMessageType[messageType]\n        if (!(payload instanceof messageClass.getPayloadClass())) {\n            throw new ValidationError(`An unexpected payload was passed to ${\n                messageClass.getMessageName()\n            }! Expected: ${\n                messageClass.getPayloadClass().name\n            }, was: ${\n                payload.constructor.name\n            }`)\n        }\n    }\n\n    static getPayloadClass() {\n        throw new Error('Abstract method called - please override in subclass!')\n    }\n\n    static getMessageName() {\n        throw new Error('Abstract method called - please override in subclass!')\n    }\n\n    toObject(version = 0, payloadVersion = 28) {\n        if (version === 0) {\n            return [version, this.messageType, this.subId, this.payload.toObject(payloadVersion)]\n        }\n        throw UnsupportedVersionError(version, 'Supported versions: [0]')\n    }\n\n    serialize(version = 0, payloadVersion = 28) {\n        return JSON.stringify(this.toObject(version, payloadVersion))\n    }\n\n    static checkVersion(message) {\n        if (message[0] !== 0) {\n            throw UnsupportedVersionError(message[0], 'Supported versions: [0]')\n        }\n    }\n\n    static deserialize(stringOrArray) {\n        const message = ParseUtil.ensureParsed(stringOrArray)\n        this.checkVersion(message)\n        const deserializedPayload = messageClassByMessageType[message[1]].getPayloadClass().deserialize(message[3])\n        const constructorArgs = messageClassByMessageType[message[1]].getConstructorArguments(message, deserializedPayload)\n        return new messageClassByMessageType[message[1]](...constructorArgs)\n    }\n\n    // Need to register subclasses like this to avoid circular dependencies\n    static registerMessageClass(clazz, messageType) {\n        messageClassByMessageType[messageType] = clazz\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/WebsocketResponse.js","module.exports = class ValidationError extends Error {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/errors/ValidationError.js","import ValidationError from '../errors/ValidationError'\nimport ParseUtil from '../utils/ParseUtil'\nimport UnsupportedVersionError from '../errors/UnsupportedVersionError'\n\nconst messageClassByMessageType = {}\n\nexport default class WebsocketRequest {\n    constructor(type, streamId, apiKey, sessionToken) {\n        if (!streamId) {\n            throw new ValidationError('No stream ID given!')\n        }\n        if (!type) {\n            throw new ValidationError('No message type given!')\n        }\n\n        this.type = type\n        this.streamId = streamId\n        this.apiKey = apiKey\n        this.sessionToken = sessionToken\n    }\n\n    toObject() {\n        return {\n            type: this.type,\n            stream: this.streamId,\n            authKey: this.apiKey,\n            sessionToken: this.sessionToken,\n        }\n    }\n\n    serialize() {\n        return JSON.stringify(this.toObject())\n    }\n\n    static checkVersion(message) {\n        const version = message.version || 0\n        if (version !== 0) {\n            throw UnsupportedVersionError(version, 'Supported versions: [0]')\n        }\n    }\n\n    static deserialize(stringOrObject) {\n        const message = ParseUtil.ensureParsed(stringOrObject)\n        this.checkVersion(message)\n        const constructorArgs = messageClassByMessageType[message.type].getConstructorArguments(message)\n        return new messageClassByMessageType[message.type](...constructorArgs)\n    }\n\n    // Need to register subclasses like this to avoid circular dependencies\n    static registerMessageClass(clazz, messageType) {\n        messageClassByMessageType[messageType] = clazz\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/WebsocketRequest.js","module.exports = {\n    ensureParsed: (stringOrObject) => (typeof stringOrObject === 'string' ? JSON.parse(stringOrObject) : stringOrObject),\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ParseUtil.js","module.exports = class UnsupportedVersionError extends Error {\n    constructor(version, message) {\n        super(`Unsupported version: ${version}, message: ${message}`)\n        this.version = version\n        this.message = message\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/errors/UnsupportedVersionError.js","import ParseUtil from '../utils/ParseUtil'\nimport ValidationError from '../errors/ValidationError'\n\nclass StreamAndPartition {\n    constructor(streamId, streamPartition = 0) {\n        if (!streamId) {\n            throw new ValidationError('Stream ID not given!')\n        }\n        if (!streamPartition == null) {\n            throw new ValidationError('Stream partition not given!')\n        }\n\n        this.streamId = streamId\n        this.streamPartition = streamPartition\n    }\n\n    toObject() {\n        return {\n            stream: this.streamId,\n            partition: this.streamPartition,\n        }\n    }\n\n    serialize() {\n        return JSON.stringify(this.toObject())\n    }\n\n    static objectToConstructorArgs(msg) {\n        return [msg.stream, msg.partition]\n    }\n\n    static deserialize(stringOrObject) {\n        const msg = ParseUtil.ensureParsed(stringOrObject)\n\n        // calling this.prototype.constructor instead of new StreamAndPartition(...) works for subclasses too\n        return new this.prototype.constructor(...this.objectToConstructorArgs(msg))\n    }\n}\n\nmodule.exports = StreamAndPartition\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/StreamAndPartition.js","import InvalidJsonError from '../errors/InvalidJsonError'\nimport UnsupportedVersionError from '../errors/UnsupportedVersionError'\n\nconst BYE_KEY = '_bye'\n\nclass StreamMessage {\n    constructor(streamId, streamPartition, timestamp, ttl, offset, previousOffset, contentType, content, signatureType, publisherAddress, signature) {\n        this.streamId = streamId\n        this.streamPartition = streamPartition\n        this.timestamp = timestamp\n        this.ttl = ttl\n        this.offset = offset\n        this.previousOffset = previousOffset\n        this.contentType = contentType\n        this.content = content\n        this.signatureType = signatureType\n        this.publisherAddress = publisherAddress\n        this.signature = signature\n    }\n\n    getParsedContent() {\n        if (this.parsedContent !== undefined) {\n            return this.parsedContent\n        } else if (this.contentType === StreamMessage.CONTENT_TYPES.JSON && typeof this.content === 'object') {\n            this.parsedContent = this.content\n        } else if (this.contentType === StreamMessage.CONTENT_TYPES.JSON && typeof this.content === 'string') {\n            try {\n                this.parsedContent = JSON.parse(this.content)\n            } catch (err) {\n                throw new InvalidJsonError(\n                    this.streamId,\n                    this.content,\n                    err,\n                    this,\n                )\n            }\n        } else {\n            throw new Error(`Unsupported content type: ${this.contentType}`)\n        }\n\n        return this.parsedContent\n    }\n\n    getSerializedContent() {\n        if (typeof this.content === 'string') {\n            return this.content\n        } else if (this.contentType === StreamMessage.CONTENT_TYPES.JSON && typeof this.content === 'object') {\n            return JSON.stringify(this.content)\n        } else if (this.contentType === StreamMessage.CONTENT_TYPES.JSON) {\n            throw new Error('Stream payloads can only be objects!')\n        } else {\n            throw new Error(`Unsupported content type: ${this.contentType}`)\n        }\n    }\n\n    toObject(version = 28, parsedContent = false, compact = true) {\n        if (version === 28 || version === 29) {\n            if (compact) {\n                const arr = [\n                    version,\n                    this.streamId,\n                    this.streamPartition,\n                    this.timestamp,\n                    this.ttl,\n                    this.offset,\n                    this.previousOffset,\n                    this.contentType,\n                    (parsedContent ? this.getParsedContent() : this.getSerializedContent()),\n                ]\n                if (version === 29) {\n                    arr.push(\n                        this.signatureType,\n                        this.publisherAddress,\n                        this.signature,\n                    )\n                }\n                return arr\n            }\n            const obj = {\n                streamId: this.streamId,\n                streamPartition: this.streamPartition,\n                timestamp: this.timestamp,\n                ttl: this.ttl,\n                offset: this.offset,\n                previousOffset: this.previousOffset,\n                contentType: this.contentType,\n                content: (parsedContent ? this.getParsedContent() : this.getSerializedContent()),\n            }\n            if (version === 29) {\n                obj.signatureType = this.signatureType\n                obj.publisherAddress = this.publisherAddress\n                obj.signature = this.signature\n            }\n            return obj\n        }\n        throw new UnsupportedVersionError(version, 'Supported versions: [28, 29]')\n    }\n\n    serialize(version = 28) {\n        return JSON.stringify(this.toObject(version))\n    }\n\n    static deserialize(stringOrArray, parseContent = true) {\n        const message = (typeof stringOrArray === 'string' ? JSON.parse(stringOrArray) : stringOrArray)\n\n        /**\n         * Version 28: [version, streamId, streamPartition, timestamp, ttl, offset, previousOffset, contentType, content]\n         * Version 29: [version, streamId, streamPartition, timestamp, ttl, offset, previousOffset, contentType, content,\n         * signatureType, address, signature]\n         */\n        if (message[0] === 28 || message[0] === 29) {\n            const result = new this.prototype.constructor(...message.slice(1))\n\n            // Ensure that the content parses\n            if (parseContent) {\n                result.getParsedContent()\n            }\n            return result\n        }\n        throw new UnsupportedVersionError(message[0], 'Supported versions: [28, 29]')\n    }\n\n    isByeMessage() {\n        return !!this.getParsedContent()[BYE_KEY]\n    }\n}\n\nStreamMessage.CONTENT_TYPES = {\n    JSON: 27,\n}\n\nmodule.exports = StreamMessage\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/StreamMessage.js","import ResendResponsePayload from './ResendResponsePayload'\nimport WebsocketResponse from './WebsocketResponse'\n\nexport default class ResendResponse extends WebsocketResponse {\n    constructor(TYPE, streamId, streamPartition, subId) {\n        super(TYPE, new ResendResponsePayload(streamId, streamPartition, subId))\n    }\n    static getPayloadClass() {\n        return ResendResponsePayload\n    }\n    // Subclasses must have a constructor of this form\n    static getConstructorArguments(serializedMessage, payload) {\n        return [payload.streamId, payload.streamPartition, payload.subId]\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/ResendResponse.js","module.exports = class InvalidJsonError extends Error {\n    constructor(streamId, jsonString, parseError, streamMessage) {\n        super(`Invalid JSON in stream ${streamId}: ${jsonString}. Error while parsing was: ${parseError}`)\n        this.streamId = streamId\n        this.jsonString = jsonString\n        this.parseError = parseError\n        this.streamMessage = streamMessage\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/errors/InvalidJsonError.js","module.exports = {\n    parse: (millisOrString) => {\n        if (typeof millisOrString === 'number') {\n            return millisOrString\n        } else if (typeof millisOrString === 'string') {\n            // Try if this string represents a number\n            const timestamp = Number(millisOrString) || Date.parse(millisOrString)\n            if (Number.isNaN(timestamp)) {\n                throw new Error(`Invalid timestamp: ${millisOrString}`)\n            } else {\n                return timestamp\n            }\n        } else {\n            throw new Error(`Invalid timestamp: ${millisOrString}`)\n        }\n    },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/TimestampUtil.js","import ParseUtil from '../utils/ParseUtil'\n\nmodule.exports = class ErrorPayload {\n    constructor(errorString) {\n        this.error = errorString\n    }\n\n    toObject() {\n        return {\n            error: this.error,\n        }\n    }\n\n    static deserialize(stringOrObject) {\n        const msg = ParseUtil.ensureParsed(stringOrObject)\n        if (!msg.error) {\n            throw new Error(`Invalid error payload received: ${JSON.stringify(msg)}`)\n        }\n        return new ErrorPayload(msg.error)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/ErrorPayload.js","import StreamAndPartition from './StreamAndPartition'\n\nmodule.exports = class ResendResponsePayload extends StreamAndPartition {\n    constructor(streamId, streamPartition, subId) {\n        super(streamId, streamPartition)\n        if (subId == null) {\n            throw new Error('Subscription id cannot be null!')\n        }\n        this.subId = subId\n    }\n\n    toObject() {\n        return {\n            ...super.toObject(),\n            sub: this.subId,\n        }\n    }\n\n    static objectToConstructorArgs(msg) {\n        return [msg.stream, msg.partition, msg.sub]\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/ResendResponsePayload.js","import WebsocketRequest from './protocol/WebsocketRequest'\nimport WebsocketResponse from './protocol/WebsocketResponse'\nimport StreamMessage from './protocol/StreamMessage'\nimport BroadcastMessage from './protocol/BroadcastMessage'\nimport UnicastMessage from './protocol/UnicastMessage'\nimport PublishRequest from './protocol/PublishRequest'\nimport ErrorResponse from './protocol/ErrorResponse'\nimport ErrorPayload from './protocol/ErrorPayload'\nimport ResendRequest from './protocol/ResendRequest'\nimport ResendResponseNoResend from './protocol/ResendResponseNoResend'\nimport ResendResponseResending from './protocol/ResendResponseResending'\nimport ResendResponseResent from './protocol/ResendResponseResent'\nimport SubscribeRequest from './protocol/SubscribeRequest'\nimport SubscribeResponse from './protocol/SubscribeResponse'\nimport UnsubscribeRequest from './protocol/UnsubscribeRequest'\nimport UnsubscribeResponse from './protocol/UnsubscribeResponse'\nimport StreamAndPartition from './protocol/StreamAndPartition'\nimport ResendResponsePayload from './protocol/ResendResponsePayload'\nimport InvalidJsonError from './errors/InvalidJsonError'\nimport UnsupportedVersionError from './errors/UnsupportedVersionError'\n\nimport TimestampUtil from './utils/TimestampUtil'\n\nmodule.exports = {\n    WebsocketRequest,\n    WebsocketResponse,\n    StreamMessage,\n    BroadcastMessage,\n    UnicastMessage,\n    PublishRequest,\n    ErrorResponse,\n    ErrorPayload,\n    ResendRequest,\n    ResendResponseNoResend,\n    ResendResponseResending,\n    ResendResponseResent,\n    ResendResponsePayload,\n    SubscribeRequest,\n    SubscribeResponse,\n    UnsubscribeRequest,\n    UnsubscribeResponse,\n    StreamAndPartition,\n    Errors: {\n        InvalidJsonError,\n        UnsupportedVersionError,\n    },\n    Utils: {\n        TimestampUtil,\n    },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import WebsocketResponse from './WebsocketResponse'\nimport StreamMessage from './StreamMessage'\n\nconst TYPE = 0\n\nclass BroadcastMessage extends WebsocketResponse {\n    constructor(streamMessage) {\n        super(TYPE, streamMessage)\n    }\n    static getMessageName() {\n        return 'BroadcastMessage'\n    }\n    static getPayloadClass() {\n        return StreamMessage\n    }\n    static getConstructorArguments(message, payload) {\n        return [payload]\n    }\n}\n\nWebsocketResponse.registerMessageClass(BroadcastMessage, TYPE)\nmodule.exports = BroadcastMessage\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/BroadcastMessage.js","import WebsocketResponse from './WebsocketResponse'\nimport StreamMessage from './StreamMessage'\n\nconst TYPE = 1\n\nclass UnicastMessage extends WebsocketResponse {\n    constructor(streamMessage, subId) {\n        super(TYPE, streamMessage, subId)\n    }\n    static getMessageName() {\n        return 'UnicastMessage'\n    }\n    static getPayloadClass() {\n        return StreamMessage\n    }\n    static getConstructorArguments(message, payload) {\n        return [payload, message[2]] // message[2] is subId\n    }\n}\n\nWebsocketResponse.registerMessageClass(UnicastMessage, TYPE)\nmodule.exports = UnicastMessage\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/UnicastMessage.js","import TimestampUtil from '../utils/TimestampUtil'\nimport ValidationError from '../errors/ValidationError'\nimport WebsocketRequest from './WebsocketRequest'\n\nconst TYPE = 'publish'\n\nclass PublishRequest extends WebsocketRequest {\n    constructor(streamId, apiKey, sessionToken, content, timestamp, partitionKey, publisherAddress, signatureType, signature) {\n        super(TYPE, streamId, apiKey, sessionToken)\n\n        if (!content) {\n            throw new ValidationError('No content given!')\n        }\n        this.content = content\n\n        if (timestamp) {\n            this.timestamp = TimestampUtil.parse(timestamp)\n        }\n\n        this.partitionKey = partitionKey\n        this.publisherAddress = publisherAddress\n        this.signatureType = signatureType\n        this.signature = signature\n    }\n\n    getTimestampAsNumber() {\n        if (this.timestamp) {\n            return TimestampUtil.parse(this.timestamp)\n        }\n        return undefined\n    }\n\n    getSerializedContent() {\n        if (typeof this.content === 'string') {\n            return this.content\n        } else if (typeof this.content === 'object') {\n            return JSON.stringify(this.content)\n        }\n        throw new Error('Stream payloads can only be objects!')\n    }\n\n    toObject() {\n        return {\n            ...super.toObject(),\n            msg: this.getSerializedContent(),\n            ts: this.getTimestampAsNumber(),\n            pkey: this.partitionKey,\n            addr: this.publisherAddress,\n            sigtype: this.signatureType,\n            sig: this.signature,\n        }\n    }\n\n    static getConstructorArguments(msg) {\n        return [\n            msg.stream,\n            msg.authKey,\n            msg.sessionToken,\n            msg.msg,\n            msg.ts,\n            msg.pkey,\n            msg.addr,\n            msg.sigtype,\n            msg.sig,\n        ]\n    }\n}\n\nWebsocketRequest.registerMessageClass(PublishRequest, TYPE)\nmodule.exports = PublishRequest\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/PublishRequest.js","import WebsocketResponse from './WebsocketResponse'\nimport ErrorPayload from './ErrorPayload'\n\nconst TYPE = 7\n\nclass ErrorResponse extends WebsocketResponse {\n    constructor(errorMessage) {\n        super(TYPE, new ErrorPayload(errorMessage))\n    }\n    static getMessageName() {\n        return 'ErrorResponse'\n    }\n    static getPayloadClass() {\n        return ErrorPayload\n    }\n    static getConstructorArguments(message, payload) {\n        return [payload.error]\n    }\n}\n\nWebsocketResponse.registerMessageClass(ErrorResponse, TYPE)\nmodule.exports = ErrorResponse\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/ErrorResponse.js","import ValidationError from '../errors/ValidationError'\nimport WebsocketRequest from './WebsocketRequest'\n\nconst TYPE = 'resend'\n\nclass ResendRequest extends WebsocketRequest {\n    constructor(streamId, streamPartition = 0, subId, resendOptions, apiKey, sessionToken) {\n        super(TYPE, streamId, apiKey, sessionToken)\n\n        if (!resendOptions.resend_all && !resendOptions.resend_last\n          && resendOptions.resend_from == null && resendOptions.resend_from_time == null) {\n            throw new ValidationError('Invalid resend options!')\n        }\n        if (!subId) {\n            throw new ValidationError('Subscription ID not given!')\n        }\n\n        this.streamPartition = streamPartition\n        this.subId = subId\n        this.resendOptions = resendOptions\n    }\n\n    toObject() {\n        return {\n            ...super.toObject(),\n            partition: this.streamPartition,\n            sub: this.subId,\n            ...this.resendOptions,\n        }\n    }\n\n    static getConstructorArguments(msg) {\n        // Every property that starts with resend_ is a resend option\n        const resendOptions = {}\n        Object.keys(msg).forEach((key) => {\n            if (key.startsWith('resend_')) {\n                resendOptions[key] = msg[key]\n            }\n        })\n\n        return [\n            msg.stream,\n            msg.partition,\n            msg.sub,\n            resendOptions,\n            msg.authKey,\n            msg.sessionToken,\n        ]\n    }\n}\n\nWebsocketRequest.registerMessageClass(ResendRequest, TYPE)\nmodule.exports = ResendRequest\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/ResendRequest.js","import ResendResponse from './ResendResponse'\nimport WebsocketResponse from './WebsocketResponse'\n\nconst TYPE = 6\n\nclass ResendResponseNoResend extends ResendResponse {\n    constructor(streamId, streamPartition, subId) {\n        super(TYPE, streamId, streamPartition, subId)\n    }\n    static getMessageName() {\n        return 'ResendResponseNoResend'\n    }\n}\n\nWebsocketResponse.registerMessageClass(ResendResponseNoResend, TYPE)\nmodule.exports = ResendResponseNoResend\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/ResendResponseNoResend.js","import ResendResponse from './ResendResponse'\nimport WebsocketResponse from './WebsocketResponse'\n\nconst TYPE = 4\n\nclass ResendResponseResending extends ResendResponse {\n    constructor(streamId, streamPartition, subId) {\n        super(TYPE, streamId, streamPartition, subId)\n    }\n    static getMessageName() {\n        return 'ResendResponseResending'\n    }\n}\n\nWebsocketResponse.registerMessageClass(ResendResponseResending, TYPE)\nmodule.exports = ResendResponseResending\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/ResendResponseResending.js","import ResendResponse from './ResendResponse'\nimport WebsocketResponse from './WebsocketResponse'\n\nconst TYPE = 5\n\nclass ResendResponseResent extends ResendResponse {\n    constructor(streamId, streamPartition, subId) {\n        super(TYPE, streamId, streamPartition, subId)\n    }\n    static getMessageName() {\n        return 'ResendResponseResent'\n    }\n}\n\nWebsocketResponse.registerMessageClass(ResendResponseResent, TYPE)\nmodule.exports = ResendResponseResent\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/ResendResponseResent.js","import ValidationError from '../errors/ValidationError'\nimport WebsocketRequest from './WebsocketRequest'\n\nconst TYPE = 'subscribe'\n\nclass SubscribeRequest extends WebsocketRequest {\n    constructor(streamId, streamPartition = 0, apiKey, sessionToken) {\n        super(TYPE, streamId, apiKey, sessionToken)\n\n        if (streamPartition == null) {\n            throw new ValidationError('Stream partition not given!')\n        }\n\n        this.streamPartition = streamPartition\n    }\n\n    toObject() {\n        return {\n            ...super.toObject(),\n            partition: this.streamPartition,\n        }\n    }\n\n    static getConstructorArguments(msg) {\n        return [msg.stream, msg.partition, msg.authKey, msg.sessionToken]\n    }\n}\n\nWebsocketRequest.registerMessageClass(SubscribeRequest, TYPE)\nmodule.exports = SubscribeRequest\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/SubscribeRequest.js","import WebsocketResponse from './WebsocketResponse'\nimport StreamAndPartition from './StreamAndPartition'\n\nconst TYPE = 2\n\nclass SubscribeResponse extends WebsocketResponse {\n    constructor(streamId, streamPartition) {\n        super(TYPE, new StreamAndPartition(streamId, streamPartition))\n    }\n    static getMessageName() {\n        return 'SubscribeResponse'\n    }\n    static getPayloadClass() {\n        return StreamAndPartition\n    }\n    static getConstructorArguments(message, payload) {\n        return [payload.streamId, payload.streamPartition]\n    }\n}\n\nWebsocketResponse.registerMessageClass(SubscribeResponse, TYPE)\nmodule.exports = SubscribeResponse\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/SubscribeResponse.js","import ValidationError from '../errors/ValidationError'\nimport WebsocketRequest from './WebsocketRequest'\n\nconst TYPE = 'unsubscribe'\n\nclass UnsubscribeRequest extends WebsocketRequest {\n    constructor(streamId, streamPartition = 0) {\n        super(TYPE, streamId)\n\n        if (streamPartition == null) {\n            throw new ValidationError('Stream partition not given!')\n        }\n\n        this.streamPartition = streamPartition\n    }\n\n    toObject() {\n        return {\n            ...super.toObject(),\n            partition: this.streamPartition,\n        }\n    }\n\n    static getConstructorArguments(msg) {\n        return [msg.stream, msg.partition]\n    }\n}\nWebsocketRequest.registerMessageClass(UnsubscribeRequest, TYPE)\nmodule.exports = UnsubscribeRequest\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/UnsubscribeRequest.js","import StreamAndPartition from './StreamAndPartition'\nimport WebsocketResponse from './WebsocketResponse'\n\nconst TYPE = 3\n\nclass UnsubscribeResponse extends WebsocketResponse {\n    constructor(streamId, streamPartition) {\n        super(TYPE, new StreamAndPartition(streamId, streamPartition))\n    }\n    static getMessageName() {\n        return 'UnsubscribeResponse'\n    }\n    static getPayloadClass() {\n        return StreamAndPartition\n    }\n    static getConstructorArguments(message, payload) {\n        return [payload.streamId, payload.streamPartition]\n    }\n}\n\nWebsocketResponse.registerMessageClass(UnsubscribeResponse, TYPE)\nmodule.exports = UnsubscribeResponse\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocol/UnsubscribeResponse.js"],"sourceRoot":""}