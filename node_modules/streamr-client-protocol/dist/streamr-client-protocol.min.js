!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("streamr-client-protocol",[],t):"object"==typeof exports?exports.Protocol=t():e.Protocol=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=12)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=a(r(4)),i=a(r(1)),u=a(r(3));function a(e){return e&&e.__esModule?e:{default:e}}var s={};e.exports=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.messageType=t,this.payload=r,this.subId=n;var o=s[t];if(!(r instanceof o.getPayloadClass()))throw new i.default("An unexpected payload was passed to "+o.getMessageName()+"! Expected: "+o.getPayloadClass().name+", was: "+r.constructor.name)}return n(e,[{key:"toObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;if(0===e)return[e,this.messageType,this.subId,this.payload.toObject(t)];throw(0,o.default)(e,"Supported versions: [0]")}},{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;return JSON.stringify(this.toObject(e,t))}}],[{key:"getPayloadClass",value:function(){throw new Error("Abstract method called - please override in subclass!")}},{key:"getMessageName",value:function(){throw new Error("Abstract method called - please override in subclass!")}},{key:"checkVersion",value:function(e){if(0!==e[0])throw(0,o.default)(e[0],"Supported versions: [0]")}},{key:"deserialize",value:function(e){var t=u.default.ensureParsed(e);this.checkVersion(t);var r=s[t[1]].getPayloadClass().deserialize(t[3]),n=s[t[1]].getConstructorArguments(t,r);return new(Function.prototype.bind.apply(s[t[1]],[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n))))}},{key:"registerMessageClass",value:function(e,t){s[t]=e}}]),e}()},function(e,t,r){"use strict";function n(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}e.exports=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n(Error)),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=a(r(1)),i=a(r(3)),u=a(r(4));function a(e){return e&&e.__esModule?e:{default:e}}var s={},c=function(){function e(t,r,n,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw new o.default("No stream ID given!");if(!t)throw new o.default("No message type given!");this.type=t,this.streamId=r,this.apiKey=n,this.sessionToken=i}return n(e,[{key:"toObject",value:function(){return{type:this.type,stream:this.streamId,authKey:this.apiKey,sessionToken:this.sessionToken}}},{key:"serialize",value:function(){return JSON.stringify(this.toObject())}}],[{key:"checkVersion",value:function(e){var t=e.version||0;if(0!==t)throw(0,u.default)(t,"Supported versions: [0]")}},{key:"deserialize",value:function(e){var t=i.default.ensureParsed(e);this.checkVersion(t);var r=s[t.type].getConstructorArguments(t);return new(Function.prototype.bind.apply(s[t.type],[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r))))}},{key:"registerMessageClass",value:function(e,t){s[t]=e}}]),e}();t.default=c},function(e,t,r){"use strict";e.exports={ensureParsed:function(e){return"string"==typeof e?JSON.parse(e):e}}},function(e,t,r){"use strict";function n(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}e.exports=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Unsupported version: "+e+", message: "+r));return n.version=e,n.message=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n(Error)),t}()},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(3)),i=u(r(1));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new i.default("Stream ID not given!");if(null==!r)throw new i.default("Stream partition not given!");this.streamId=t,this.streamPartition=r}return n(e,[{key:"toObject",value:function(){return{stream:this.streamId,partition:this.streamPartition}}},{key:"serialize",value:function(){return JSON.stringify(this.toObject())}}],[{key:"objectToConstructorArgs",value:function(e){return[e.stream,e.partition]}},{key:"deserialize",value:function(e){var t=o.default.ensureParsed(e);return new(Function.prototype.bind.apply(this.prototype.constructor,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(this.objectToConstructorArgs(t)))))}}]),e}();e.exports=a},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=a(r(8)),u=a(r(4));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,r,n,o,i,u,a,s,c,f,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=t,this.streamPartition=r,this.timestamp=n,this.ttl=o,this.offset=i,this.previousOffset=u,this.contentType=a,this.content=s,this.signatureType=c,this.publisherAddress=f,this.signature=l}return o(e,[{key:"getParsedContent",value:function(){if(void 0!==this.parsedContent)return this.parsedContent;if(this.contentType===e.CONTENT_TYPES.JSON&&"object"===n(this.content))this.parsedContent=this.content;else{if(this.contentType!==e.CONTENT_TYPES.JSON||"string"!=typeof this.content)throw new Error("Unsupported content type: "+this.contentType);try{this.parsedContent=JSON.parse(this.content)}catch(e){throw new i.default(this.streamId,this.content,e,this)}}return this.parsedContent}},{key:"getSerializedContent",value:function(){if("string"==typeof this.content)return this.content;if(this.contentType===e.CONTENT_TYPES.JSON&&"object"===n(this.content))return JSON.stringify(this.content);throw this.contentType===e.CONTENT_TYPES.JSON?new Error("Stream payloads can only be objects!"):new Error("Unsupported content type: "+this.contentType)}},{key:"toObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:28,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(28===e||29===e){if(r){var n=[e,this.streamId,this.streamPartition,this.timestamp,this.ttl,this.offset,this.previousOffset,this.contentType,t?this.getParsedContent():this.getSerializedContent()];return 29===e&&n.push(this.signatureType,this.publisherAddress,this.signature),n}var o={streamId:this.streamId,streamPartition:this.streamPartition,timestamp:this.timestamp,ttl:this.ttl,offset:this.offset,previousOffset:this.previousOffset,contentType:this.contentType,content:t?this.getParsedContent():this.getSerializedContent()};return 29===e&&(o.signatureType=this.signatureType,o.publisherAddress=this.publisherAddress,o.signature=this.signature),o}throw new u.default(e,"Supported versions: [28, 29]")}},{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:28;return JSON.stringify(this.toObject(e))}},{key:"isByeMessage",value:function(){return!!this.getParsedContent()._bye}}],[{key:"deserialize",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r="string"==typeof e?JSON.parse(e):e;if(28===r[0]||29===r[0]){var n=new(Function.prototype.bind.apply(this.prototype.constructor,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r.slice(1)))));return t&&n.getParsedContent(),n}throw new u.default(r[0],"Supported versions: [28, 29]")}}]),e}();s.CONTENT_TYPES={JSON:27},e.exports=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(11)),i=u(r(0));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,r,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,new o.default(r,n,i)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,null,[{key:"getPayloadClass",value:function(){return o.default}},{key:"getConstructorArguments",value:function(e,t){return[t.streamId,t.streamPartition,t.subId]}}]),t}();t.default=a},function(e,t,r){"use strict";function n(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}e.exports=function(e){function t(e,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Invalid JSON in stream "+e+": "+r+". Error while parsing was: "+n));return i.streamId=e,i.jsonString=r,i.parseError=n,i.streamMessage=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n(Error)),t}()},function(e,t,r){"use strict";e.exports={parse:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=Number(e)||Date.parse(e);if(Number.isNaN(t))throw new Error("Invalid timestamp: "+e);return t}throw new Error("Invalid timestamp: "+e)}}},function(e,t,r){"use strict";var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3),u=(n=i)&&n.__esModule?n:{default:n};e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.error=t}return o(e,[{key:"toObject",value:function(){return{error:this.error}}}],[{key:"deserialize",value:function(t){var r=u.default.ensureParsed(t);if(!r.error)throw new Error("Invalid error payload received: "+JSON.stringify(r));return new e(r.error)}}]),e}()},function(e,t,r){"use strict";var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(5),a=(n=u)&&n.__esModule?n:{default:n};e.exports=function(e){function t(e,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(null==n)throw new Error("Subscription id cannot be null!");return o.subId=n,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"toObject",value:function(){return o({},function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toObject",this).call(this),{sub:this.subId})}}],[{key:"objectToConstructorArgs",value:function(e){return[e.stream,e.partition,e.sub]}}]),t}()},function(e,t,r){"use strict";var n=P(r(2)),o=P(r(0)),i=P(r(6)),u=P(r(13)),a=P(r(14)),s=P(r(15)),c=P(r(16)),f=P(r(10)),l=P(r(17)),p=P(r(18)),y=P(r(19)),b=P(r(20)),h=P(r(21)),d=P(r(22)),v=P(r(23)),g=P(r(24)),O=P(r(5)),_=P(r(11)),w=P(r(8)),m=P(r(4)),j=P(r(9));function P(e){return e&&e.__esModule?e:{default:e}}e.exports={WebsocketRequest:n.default,WebsocketResponse:o.default,StreamMessage:i.default,BroadcastMessage:u.default,UnicastMessage:a.default,PublishRequest:s.default,ErrorResponse:c.default,ErrorPayload:f.default,ResendRequest:l.default,ResendResponseNoResend:p.default,ResendResponseResending:y.default,ResendResponseResent:b.default,ResendResponsePayload:_.default,SubscribeRequest:h.default,SubscribeResponse:d.default,UnsubscribeRequest:v.default,UnsubscribeResponse:g.default,StreamAndPartition:O.default,Errors:{InvalidJsonError:w.default,UnsupportedVersionError:m.default},Utils:{TimestampUtil:j.default}}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(0)),i=u(r(6));function u(e){return e&&e.__esModule?e:{default:e}}var a=0,s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,null,[{key:"getMessageName",value:function(){return"BroadcastMessage"}},{key:"getPayloadClass",value:function(){return i.default}},{key:"getConstructorArguments",value:function(e,t){return[t]}}]),t}();o.default.registerMessageClass(s,a),e.exports=s},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(0)),i=u(r(6));function u(e){return e&&e.__esModule?e:{default:e}}var a=1,s=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,null,[{key:"getMessageName",value:function(){return"UnicastMessage"}},{key:"getPayloadClass",value:function(){return i.default}},{key:"getConstructorArguments",value:function(e,t){return[t,e[2]]}}]),t}();o.default.registerMessageClass(s,a),e.exports=s},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=c(r(9)),a=c(r(1)),s=c(r(2));function c(e){return e&&e.__esModule?e:{default:e}}var f="publish",l=function(e){function t(e,r,n,o,i,s,c,l,p){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var y=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f,e,r,n));if(!o)throw new a.default("No content given!");return y.content=o,i&&(y.timestamp=u.default.parse(i)),y.partitionKey=s,y.publisherAddress=c,y.signatureType=l,y.signature=p,y}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"getTimestampAsNumber",value:function(){if(this.timestamp)return u.default.parse(this.timestamp)}},{key:"getSerializedContent",value:function(){if("string"==typeof this.content)return this.content;if("object"===o(this.content))return JSON.stringify(this.content);throw new Error("Stream payloads can only be objects!")}},{key:"toObject",value:function(){return n({},function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toObject",this).call(this),{msg:this.getSerializedContent(),ts:this.getTimestampAsNumber(),pkey:this.partitionKey,addr:this.publisherAddress,sigtype:this.signatureType,sig:this.signature})}}],[{key:"getConstructorArguments",value:function(e){return[e.stream,e.authKey,e.sessionToken,e.msg,e.ts,e.pkey,e.addr,e.sigtype,e.sig]}}]),t}();s.default.registerMessageClass(l,f),e.exports=l},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(0)),i=u(r(10));function u(e){return e&&e.__esModule?e:{default:e}}var a=7,s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,new i.default(e)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,null,[{key:"getMessageName",value:function(){return"ErrorResponse"}},{key:"getPayloadClass",value:function(){return i.default}},{key:"getConstructorArguments",value:function(e,t){return[t.error]}}]),t}();o.default.registerMessageClass(s,a),e.exports=s},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=a(r(1)),u=a(r(2));function a(e){return e&&e.__esModule?e:{default:e}}var s="resend",c=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],o=arguments[3],u=arguments[4],a=arguments[5];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,e,u,a));if(!o.resend_all&&!o.resend_last&&null==o.resend_from&&null==o.resend_from_time)throw new i.default("Invalid resend options!");if(!n)throw new i.default("Subscription ID not given!");return c.streamPartition=r,c.subId=n,c.resendOptions=o,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),o(t,[{key:"toObject",value:function(){return n({},function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toObject",this).call(this),{partition:this.streamPartition,sub:this.subId},this.resendOptions)}}],[{key:"getConstructorArguments",value:function(e){var t={};return Object.keys(e).forEach(function(r){r.startsWith("resend_")&&(t[r]=e[r])}),[e.stream,e.partition,e.sub,t,e.authKey,e.sessionToken]}}]),t}();u.default.registerMessageClass(c,s),e.exports=c},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(7)),i=u(r(0));function u(e){return e&&e.__esModule?e:{default:e}}var a=6,s=function(e){function t(e,r,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,e,r,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,null,[{key:"getMessageName",value:function(){return"ResendResponseNoResend"}}]),t}();i.default.registerMessageClass(s,a),e.exports=s},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(7)),i=u(r(0));function u(e){return e&&e.__esModule?e:{default:e}}var a=4,s=function(e){function t(e,r,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,e,r,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,null,[{key:"getMessageName",value:function(){return"ResendResponseResending"}}]),t}();i.default.registerMessageClass(s,a),e.exports=s},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(7)),i=u(r(0));function u(e){return e&&e.__esModule?e:{default:e}}var a=5,s=function(e){function t(e,r,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,e,r,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,null,[{key:"getMessageName",value:function(){return"ResendResponseResent"}}]),t}();i.default.registerMessageClass(s,a),e.exports=s},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=a(r(1)),u=a(r(2));function a(e){return e&&e.__esModule?e:{default:e}}var s="subscribe",c=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],o=arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,e,n,o));if(null==r)throw new i.default("Stream partition not given!");return u.streamPartition=r,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),o(t,[{key:"toObject",value:function(){return n({},function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toObject",this).call(this),{partition:this.streamPartition})}}],[{key:"getConstructorArguments",value:function(e){return[e.stream,e.partition,e.authKey,e.sessionToken]}}]),t}();u.default.registerMessageClass(c,s),e.exports=c},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(0)),i=u(r(5));function u(e){return e&&e.__esModule?e:{default:e}}var a=2,s=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,new i.default(e,r)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,null,[{key:"getMessageName",value:function(){return"SubscribeResponse"}},{key:"getPayloadClass",value:function(){return i.default}},{key:"getConstructorArguments",value:function(e,t){return[t.streamId,t.streamPartition]}}]),t}();o.default.registerMessageClass(s,a),e.exports=s},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=a(r(1)),u=a(r(2));function a(e){return e&&e.__esModule?e:{default:e}}var s="unsubscribe",c=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,e));if(null==r)throw new i.default("Stream partition not given!");return n.streamPartition=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),o(t,[{key:"toObject",value:function(){return n({},function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toObject",this).call(this),{partition:this.streamPartition})}}],[{key:"getConstructorArguments",value:function(e){return[e.stream,e.partition]}}]),t}();u.default.registerMessageClass(c,s),e.exports=c},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(5)),i=u(r(0));function u(e){return e&&e.__esModule?e:{default:e}}var a=3,s=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,new o.default(e,r)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,null,[{key:"getMessageName",value:function(){return"UnsubscribeResponse"}},{key:"getPayloadClass",value:function(){return o.default}},{key:"getConstructorArguments",value:function(e,t){return[t.streamId,t.streamPartition]}}]),t}();i.default.registerMessageClass(s,a),e.exports=s}])});