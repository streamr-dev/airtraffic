<html>
<head>
    <!-- For debug messages, include debug.js and set localStorage.debug = 'StreamrClient'. See from https://github.com/visionmedia/debug -->
    <script src="../../dist/streamr-client.web.min.js"></script>

    <script>
        const log = (msg) => {
            var elem = document.createElement('p')
            elem.innerHTML = msg
            document.body.appendChild(elem)
        }

        const STREAM_ID = 'MY-STREAM-ID'
        const API_KEY = 'MY-API-KEY'

            // Create the client and give the API key to use by default
        const client = new StreamrClient({
            restUrl: 'http://localhost:8081/streamr-core/api/v1',
            auth: {
                apiKey: API_KEY,
            }
        })

        function publish() {
            // Here is the event we'll be sending
            const msg = {
                hello: 'world',
                random: Math.random()
            }

            // Publish the event to the Stream
            client.publish(STREAM_ID, msg)
                .then(() => console.log('Sent successfully: ', msg))
                .catch((err) => log(err))
        }
    </script>
</head>
<body>
    <button id="publish">Publish</button>
    <script>
        document.getElementById('publish').addEventListener('click', publish)
    </script>
</body>
</html>
